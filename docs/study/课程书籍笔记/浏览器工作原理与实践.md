## 01 浏览器多进程架构

### 进程与线程

一个进程就是一个程序的运行实例，启动一个程序时，操作系统会为该程序创建一块内存，存放代码，运行中的数据和一个执行任务的主线程，线程是依附于进程的，进程中使用多线程并行处理能提高效率

#### 进程与线程四个特点

1. 进程中任意一线程执行出错，整个进程崩溃
2. 线程之间共享进程中的数据
3. 当一个进程关闭的时候，操作系统会回收进程所占的内存
4. 进程之间的内容相互隔离

### 单进程浏览器的问题

单进程中包括其他线程，网络线程，页面线程（页面渲染，js环境，插件）

1. 不稳定，插件和渲染引擎的崩溃会导致整个浏览器的崩溃
2. 不流畅，页面渲染，js环境，插件再同一线程，只有一个能执行
3. 不安全，恶意插件，恶意脚本的安全问题

  切换多进程后:

1. 稳定 插件和渲染引擎的崩溃不会影响其他页面
2. 流畅 js阻塞的仅仅是当前的渲染界面，不会影响其他界面
3. 安全 安全沙箱，沙箱里面的程序可以运行，但不能在磁盘写入任何数据

### 多进程架构

- **浏览器进程**（主进程）。主要负责界面显示、用户交互、子进程管理，同时提供存储等功能。
- **渲染进程**。核心任务是将 HTML、CSS 和 JavaScript 转换为用户可以与之交互的网页，排版引擎 Blink 和 JavaScript 引擎 V8 都是运行在该进程中，默认情况下，Chrome 会为每个 Tab 标签创建一个渲染进程。出于安全考虑，渲染进程都是运行在沙箱模式下。
- **GPU 进程**。其实，Chrome 刚开始发布的时候是没有 GPU 进程的。而 GPU 的使用初衷是为了实现 3D CSS 的效果，只是随后网页、Chrome 的 UI 界面都选择采用 GPU 来绘制，这使得 GPU 成为浏览器普遍的需求。最后，Chrome 在其多进程架构上也引入了 GPU 进程。
- **网络进程**。主要负责页面的网络资源加载，之前是作为一个模块运行在浏览器进程里面的，直至最近才独立出来，成为一个单独的进程。
- **插件进程**。主要是负责插件的运行，因插件易崩溃，所以需要通过插件进程来隔离，以保证插件进程崩溃不会对浏览器和页面造成影响。

问题：更高的资源占用和更复杂的体系结构

## 02 网络协议

保证页面文件被完整的送达浏览器

+ IP负责把数据包送达目的主机
+ UDP负责把数据包送达具体应用
+ TCP保证了数据完整地传输

### 03 HTTP

HTTP是一种允许浏览器向服务器获取资源的协议

发起HTTP请求流程

1. 构建请求
2. 查找缓存
3. 准备IP地址和端口  通过TCP与服务器建立连接  DNS=>IP 
4. 等待TCP队列，同一域名最多只能建立6个TCP连接
5. 建立TCP连接，
6. 发送HTTP请求
7. 服务器端处理请求